<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-/mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.DreamBook.BookStoreService.mapper.member.MemberMapper">


    <select id="maxNum" resultType="int">
        select nvl(max(memberId),0) from member
    </select>


    <select id="loginData" parameterType="com.DreamBook.BookStoreService.dto.member.MemberFindDTO"
    resultType="Integer">
        select nvl(count(*),0) from member
        where userId =#{userId} and pwd = #{pwd}

    </select>

    <select id="findId" parameterType="com.DreamBook.BookStoreService.dto.member.MemberFindDTO"
            resultType="Integer">
        select nvl(count(*),0) from member
        where name =#{name} and email = #{email}

    </select>

    <select id="findUserId" parameterType="com.DreamBook.BookStoreService.dto.member.MemberFindDTO"
           resultType="String" >
        select userId from member
        where name =#{name} and email = #{email}

    </select>

    <select id="findMemberId" parameterType="com.DreamBook.BookStoreService.dto.member.MemberFindDTO"
            resultType="int" >
        select memberId from member
        where userId =#{userId}

    </select>



    <select id="findPwd" parameterType="com.DreamBook.BookStoreService.dto.member.MemberFindDTO"
            resultType="String" >
        select pwd from member
        where userId =#{userId} and email = #{email}

    </select>

    <select id="IdCheck" parameterType="String"
            resultType="Integer">
        select nvl(count(*),0) from member
        where userId =#{id}

    </select>

    <insert id="insertData" parameterType="com.DreamBook.BookStoreService.dto.member.MemberJoinDTO">

    insert into member(memberId,role,userId,pwd,name,gender,age,nikname,birth,
                       tel,postcode,address,detailAddress,extraAddress,email,favoriteGenre,
                       userGrade,purchaseAmount,point,wishQuantity)
    values (#{memberId},'MEMBER',#{userId},#{pwd},#{name},#{gender},#{age},#{nikname},#{birth},
            #{tel},#{postcode},#{address},#{detailAddress},#{extraAddress},#{email},#{favoriteGenre},'bronze',0,0,0)

    </insert>




</mapper>
